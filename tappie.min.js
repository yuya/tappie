// Tappie 1.0.0 Copyright (C) 2014 Yuya Hashimoto, MIT License.
// See https://github.com/yuya/tappie
!function(a,b){function c(a){var c=b.createEvent("Event");return c.initEvent(a,!0,!0,null,null,null,null,null,null,null,null,null,null,null,null),c}function d(a,b){a.dispatchEvent(c(b))}function e(a,b,c,d){return Math.abs(a-b)>=Math.abs(c-d)?a-b>0?"left":"right":c-d>0?"up":"down"}function f(){n=null,o.el&&(d(o.el,"longtap"),g())}function g(){o={}}function h(){n&&clearTimeout(n),n=null}function i(){for(var a,b=[k,l,m,n],c=0,d=b.length;d;++c,--d)a=b[c],a&&clearTimeout(a);k=l=m=n=null,g()}function j(){function j(a){x=p?a.touches[0]:a,y=Date.now(),z=y-(o.last||y),o.el="tagName"in x.target?x.target:x.target.parentNode,k&&clearTimeout(k),o.x1=x.pageX,o.y1=x.pageY,z>0&&250>=z&&(o.isDoubleTap=!0),o.last=y,n=setTimeout(f,u)}function v(a){x=p?a.touches[0]:a,h(),o.x2=x.pageX,o.y2=x.pageY,B+=Math.abs(o.x1-o.x2),C+=Math.abs(o.y1-o.y2)}function w(){h(),o.x2&&Math.abs(o.x1-o.x2)>30||o.y2&&Math.abs(o.y1-o.y2)>30?m=setTimeout(function(){d(o.el,"swipe"),d(o.el,"swipe"+e(o.x1,o.x2,o.y1,o.y2)),g()},0):"last"in o&&(30>B&&30>C?l=setTimeout(function(){A=c("tap"),A.cancelTouch=i,o.el.dispatchEvent(A),o.isDoubleTap?(d(o.el,"doubletap"),g()):k=setTimeout(function(){k=null,d(o.el,"singletap"),g()},250)},0):g(),B=C=0)}var x,y,z,A,B=0,C=0;b.addEventListener(q,function(a){j(a)},!1),b.addEventListener(r,function(a){v(a)},!1),b.addEventListener(s,function(){w()},!1),b.addEventListener(t,i,!1),a.addEventListener("scroll",i,!1)}var k,l,m,n,o={},p="ontouchstart"in a,q=p?"touchstart":"mousedown",r=p?"touchmove":"mousemove",s=p?"touchend":"mouseup",t=p?"touchcancel":"mouseleave",u=750;b.addEventListener("DOMContentLoaded",j,!1)}(this,this.document);