// Tappie 1.0.0 Copyright (C) 2014 Yuya Hashimoto, MIT License.
// See https://github.com/yuya/tappie
!function(a,b){function c(a){var c=b.createEvent("Event");return c.initEvent(a,!0,!0,null,null,null,null,null,null,null,null,null,null,null,null),c}function d(a,b){a.dispatchEvent(c(b))}function e(a,b,c,d){return Math.abs(a-b)>=Math.abs(c-d)?a-b>0?"left":"right":c-d>0?"up":"down"}function f(){n=null,o.el&&(d(o.el,"longtap"),g())}function g(){o={}}function h(){n&&clearTimeout(n),n=null}function i(){for(var a,b=[k,l,m,n],c=0,d=b.length;d;++c,--d)a=b[c],a&&clearTimeout(a);k=l=m=n=null,g()}function j(){function j(a){z=p?a.touches[0]:a,A=Date.now(),B=A-(o.last||A),o.el="tagName"in z.target?z.target:z.target.parentNode,k&&clearTimeout(k),o.x1=z.pageX,o.y1=z.pageY,B>0&&250>=B&&(o.isDoubleTap=!0),o.last=A,n=setTimeout(f,u)}function x(a){z=p?a.touches[0]:a,h(),o.x2=z.pageX,o.y2=z.pageY,D+=o.x1?D+Math.abs(o.x1-o.x2):0,E+=o.y1?E+Math.abs(o.y1-o.y2):0}function y(){z=p?event.touches[0]:event,h(),o.x2&&Math.abs(o.x1-o.x2)>w||o.y2&&Math.abs(o.y1-o.y2)>w?m=setTimeout(function(){d(o.el,"swipe"),d(o.el,"swipe"+e(o.x1,o.x2,o.y1,o.y2)),g()},v):"last"in o&&(w>D&&w>E?l=setTimeout(function(){C=c("tap"),C.cancelTouch=i,o.el.dispatchEvent(C),o.isDoubleTap?(d(o.el,"doubletap"),g()):k=setTimeout(function(){k=null,d(o.el,"singletap"),g()},250)},v):g(),D=E=0)}var z,A,B,C,D=0,E=0;b.addEventListener(q,function(a){j(a)},!1),b.addEventListener(r,function(a){x(a)},!1),b.addEventListener(s,function(){y()},!1),b.addEventListener(t,i,!1),a.addEventListener("scroll",i,!1)}var k,l,m,n,o={},p="ontouchstart"in a,q=p?"touchstart":"mousedown",r=p?"touchmove":"mousemove",s=p?"touchend":"mouseup",t=p?"touchcancel":"mouseleave",u=750,v=16,w=p?60:30;b.addEventListener("DOMContentLoaded",j,!1)}(this,this.document);